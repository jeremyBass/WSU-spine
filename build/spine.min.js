/*! wsu-spine 0.1.0 2014-02-18 */
/*  See https://github.com/washingtonstateuniversity/WSU-spine/ for full source.*/
function dump(a,b,c){var d="";b||(b=10),c||(c=0);for(var e="",f=0;c+1>f;f++)e+="    ";if("object"==typeof a){if(b>=c)for(var g in a){var h=a[g];"object"==typeof h?(d+=e+"'"+g+"' ...\n",d+=dump(h,b,c+1)):d+=e+"'"+g+"' => \""+h+'"\n'}}else d="===>"+a+"<===("+typeof a+")";return d}!function(a){"use strict";a.widget("ui.autosearch",a.ui.autocomplete,{_renderMenu:function(b,c){var d=this,e=c.filter(function(a,b){return"false"==a.related?b:void 0}),f=c.filter(function(a,b){return"false"!=a.related?b:void 0});a.each(e,function(a,c){d._renderItemData(b,c)}),this.options.showRelated&&f.length&&(this.options.relatedHeader&&d._renderHeader(b,this.options.relatedHeader),a.each(f,function(a,c){d._renderItemData(b,c)}))},_renderItemData:function(a,b){return this._renderItem(a,b).data("ui-autocomplete-item",b)},_renderItem:function(b,c){var d=c.label,e=c.value,f="(?![^&;]+;)(?!<[^<>]*)("+a.ui.autocomplete.escapeRegex(this.term)+")(?![^<>]*>)(?![^&;]+;)";return d="<a href='"+e+"'>"+d.replace(new RegExp(f,"gi"),"<strong>$1</strong>")+"</a>",a("<li></li>").data("item.autocomplete",c).append(d).appendTo(b)},_renderHeader:function(b,c){return a("<li></li>").append("<a href=''>"+c+"</a>").appendTo(b)}})}(jQuery),function(a,b,c,d){a.s=function(b,c){var d=b.split(".")[0];b=b.split(".")[1],a[d]=a[d]||{},a[d][b]=function(a,b){arguments.length&&this._setup(a,b)},a[d][b].prototype=a.extend({namespace:d,pluginName:b},c),a.fn[b]=function(c){c=c||{},this.options=a.extend({},c);var e="string"==typeof c,f=Array.prototype.slice.call(arguments,1),g=this;return e&&"_"===c.substring(0,1)?g:(this.each(function(){var h=a.data(this,b);h||(h=a.data(this,b,new a[d][b](c,this))),alert(dump(h)),e&&(g=h[c].apply(h,f))}),g)}},a.s("ui.spine",{defaults:{message:"Hello world!"},options:{},_setup:function(b,c){this.el=c,b=b||{},a.extend(this.options,b,{}),this._create(),this._init&&this._init()},_create:function(){var a=this;this.instance={spine:a.options,search:[],framework:[],social:[],analytics:[]},a._call(a.options.callback,a.instance.spine)},clear:function(a){return this._c(this.get(a)),this.set(a,[]),this},_c:function(a){for(var b in a)a.hasOwnProperty(b)&&(a[b]=null)},find:function(b,c,d){var e=this.get(TAX);c.value=a.isArray(c.value)?c.value:[c.value];for(var f in e)if(e.hasOwnProperty(f)){var g=!1;for(var h in c.value)if(a.inArray(c.value[h],e[f][c.property])>-1)g=!0;else if(c.operator&&"AND"===c.operator){g=!1;break}d(e[f],g)}return this},get:function(a,b){var c=this.instance;if(!c[a]){if(a.indexOf(">")>-1){for(var d=a.replace(/ /g,"").split(">"),e=0;e<d.length;e++){if(!c[d[e]]){if(!b)return null;c[d[e]]=e+1<d.length?[]:b}c=c[d[e]]}return c}b&&!c[a]&&this.set(a,b)}return c[a]},set:function(a,b){return this.instance[a]=b,this},_unwrap:function(b){return b?b instanceof jQuery?b[0]:b instanceof Object?b:a("#"+b)[0]:null},_call:function(b){b&&a.isFunction(b)&&b.apply(this,Array.prototype.slice.call(arguments,1))},clear_map:function(){this.clear("search").clear("framework").clear("social").clear("analytics")},destroy:function(b){this.clear("search").clear("framework").clear("social").clear("analytics")._c(this.instance),a.removeData(this.el,this.name),this._call(b,this)}}),a.spine=function(b){var c=this.jquery===d?a("body"):this;return a.each(c,function(){var c=a(this);a.each(b,function(a,b){c.spine(a,b)})})}}(jQuery,window,document),function(a){a.extend(a.ui.spine.prototype,{_init:function(){var b=window.location.href,c=a("#wsu-actions"),d=(a("#spine"),a("#wsu-search"),a("#wsu-contact"),a("#wsu-share"));if(!d.length){var e="";e=a("meta.share-text").length?a("meta.share-text"):"You should know ...";var f='<section id="wsu-share" class="spine-share tools closed">';f+="	<ul>",f+='		<li class="by-facebook"><a href="http://www.facebook.com/sharer/sharer.php?u='+b+'">Facebook</a></li>',f+='		<li class="by-twitter"><a href="https://twitter.com/intent/tweet?text='+e+"&url="+b+'&via=wsupullman" target="_blank">Twitter</a></li>',f+='		<li class="by-email"><a href="mailto:?subject='+e+"&body="+b+'">Email</a></li>',f+='		<!--<li class="by-gmail"><a href="https://plusone.google.com/_/+1/confirm?hl=en&url='+b+'">Google+</a></li>-->',f+='		<!--<li class="by-linkedin"><a href="http://www.linkedin.com/shareArticle?mini=true&url='+b+'&title=articleTitle&summary=articleSummary&source=articleSource">LinkedIn</a></li>-->',f+='		<!--<li class="by-pinterest"><a href="http://pinterest.com/pin/create/button/?url=""title="Pinterest">Pinterest</a></li>-->',f+="	</ul>",f+="</section>",c.append(f)}if(!a("#wsu-contact").length){var g=a('meta[itemprop="name"]').attr("content"),h=a('meta[itemprop="department"]').attr("content"),i=a('meta[itemprop="url"]').attr("content"),j=a('meta[itemprop="streetAddress"]').attr("content"),k=a('meta[itemprop="addressLocality"]').attr("content"),l=a('meta[itemprop="postalCode"]').attr("content"),m=a('meta[itemprop="telephone"]').attr("content"),n=a('meta[itemprop="email"]').attr("content"),o=a('meta[itemprop="ContactPoint"]').attr("title"),p=a('meta[itemprop="ContactPoint"]').attr("content"),q='<section id="wsu-contact" class="spine-contact tools closed">';q+='<address itemscope itemtype="http://schema.org/Organization" class="hcard">',q+='	<div class="organization-unit fn org"><a href="'+i+'" class="url">'+h+"</a></div>",q+='	<div class="organization-name">'+g+"</div>",q+='	<div class="address">',q+='		<div class="street-address">'+j+"</div>",q+='		<div class="locality">'+k+' <span class="postalcode">'+l+"</span></div>",q+="	</div>",q+='	<div class="tel"><i class="wsu-icon"></i>'+m+"</div>",q+='	<div class="email" rel="email"><a href="mailto:'+n+'"><i class="wsu-icon"></i>Email us</a></div>',"undefined"!=typeof p&&(q+='	<div class="more"><a href="'+p+'"><i class="wsu-icon"></i>'+o+"</a></div>"),q+="</address>",q+="</section>",c.append(q)}a(window).on("resize",function(){var b=a("main");if(a(".unbound").length){var c=b.offset().left,d=b.offset().right,e=a(window).width(),f=b.width();d=e-b.offset().left;var g="";g=d>=f?d-f:0;var h=c+b.width();a(".unbound.recto").css("width",d).css("margin-right",-g),a(".unbound.verso").css("width",h).css("margin-left",-c),a(".unbound.verso.recto").css("width",e)}}).trigger()},sizing:function(b){b=b||a("#jacket");var c=a(window).width();c>=1188?b.removeClass("size-small size-medium size-large size-xlarge size-lt-xlarge size-lt-large size-lt-medium size-lt-smallish size-gt-large size-gt-medium size-gt-smallish size-gt-small").removeClass("size-small size-medium size-large size-xlarge size-lt-xlarge size-lt-large size-lt-medium size-lt-smallish size-gt-large size-gt-medium size-gt-smallish size-gt-small").addClass("size-xlarge size-gt-small size-gt-smallish size-gt-medium size-gt-large"):c>=990?b.removeClass("size-small size-medium size-large size-xlarge size-lt-xlarge size-lt-large size-lt-medium size-lt-smallish size-gt-large size-gt-medium size-gt-smallish size-gt-small").addClass("size-large size-lt-xlarge size-gt-small size-gt-smallish size-gt-medium"):990>c&&c>=792?b.removeClass("size-small size-medium size-large size-xlarge size-lt-xlarge size-lt-large size-lt-medium size-lt-smallish size-gt-large size-gt-medium size-gt-smallish size-gt-small").addClass("size-medium size-lt-xlarge size-lt-large size-gt-smallish size-gt-small"):c>=694&&792>c&&a("#binder").hasClass("fixed")?b.removeClass("size-small size-medium size-large size-xlarge size-lt-xlarge size-lt-large size-lt-medium size-lt-smallish size-gt-large size-gt-medium size-gt-smallish size-gt-small").addClass("size-smallish size-lt-medium size-lt-large size-lt-xlarge size-gt-small"):792>c?b.removeClass("size-small size-medium size-large size-xlarge size-lt-xlarge size-lt-large size-lt-medium size-lt-smallish size-gt-large size-gt-medium size-gt-smallish size-gt-small").addClass("size-small size-lt-smallish size-lt-medium size-lt-large size-lt-xlarge"):396>c&&b.removeClass("size-small size-medium size-large size-xlarge size-lt-xlarge size-lt-large size-lt-medium size-lt-smallish size-gt-large size-gt-medium size-gt-smallish size-gt-small").addClass("size-small size-lt-small size-lt-smallish size-lt-medium size-lt-large size-lt-xlarge")},equalizing:function(){if(a(".equalize").length){var b=a(".row.equalize");b.find(".column").css("min-height",""),a.each(b,function(){var b=0;a.each(a(".column",this),function(){a(this).height()>b&&(b=a(this).outerHeight())}),a(".column",this).not(".unequaled").css("min-height",b),a("section.equalize .column",this).css("min-height","auto")})}},mainheight:function(){var b=(a("main").offset().top,a(window).height()),c=b;a("#binder").hasClass("size-lt-large")&&(c-=50),a("main.fill-window-height").css("min-height",c)},setup_jacket:function(){},setup_binder:function(){},setup_content:function(){},setup_spine:function(){a(document).scroll(function(){var b=a(document).scrollTop();b>49?$spine.not(".unshelved").addClass("scanned"):$spine.removeClass("scanned")}),a("main").on("click swipeleft",function(){$spine.hasClass("unshelved")&&$spine.toggleClass("shelved unshelved")}),a(window).on("load resize scroll mouseup touchend",function(){var b=a("#spine footer").height(),c=window.innerHeight-b-50,d=a("#glue").height();d>c?$spine.removeClass("uncracked").addClass("cracked"):$spine.removeClass("cracked").addClass("uncracked")}),a(document).scroll(function(){var b=window.innerHeight,c=a(document).scrollTop(),d=a("#glue").height(),e=d-b;c>e?a("#spine.cracked").addClass("scrolled"):a("#spine.cracked").removeClass("scrolled")})},setup_tabs:function(){a("#wsu-share-tab button").on("click",function(b){b.preventDefault(),a("#wsu-actions *.opened,#wsu-share,#wsu-share-tab").toggleClass("opened closed")}),a("#wsu-search-tab button").on("click",function(b){b.preventDefault(),a("#wsu-actions *.opened,#wsu-search,#wsu-search-tab").toggleClass("opened closed"),a("#spine section#wsu-search input").focus()}),a("#wsu-contact-tab button").on("click",function(b){b.preventDefault(),a("#wsu-actions *.opened,#wsu-contact,#wsu-contact-tab").toggleClass("opened closed")}),this.setup_printing()},setup_nav:function(){a("#spine nav ul,#spine ul").parents("li").addClass("parent"),a("#spine nav li[class*=current], nav li[class*=active]").addClass("active").parents("li").addClass("active"),a("#spine nav li a[class*=current], nav li a[class*=active]").parents("li").addClass("active"),a("#spine .active").not(":has(.active)").addClass("dogeared"),a("#spine nav li.parent > a").on("click",function(b){b.preventDefault(),a(this).parent("li").siblings().removeClass("opened"),a(this).parent("li").toggleClass("opened")}),a("#spine nav li.parent > a").each(function(){var b="Overview";if(a(this).attr("title")){var c=a(this).attr("title").length;c>0&&(b=a(this).attr("title"))}var d="overview";a(this).closest(".parent").hasClass("dogeared")&&(d+=" dogeared");var e=a(this).attr("href");"#"!=e&&a(this).parent("li").children("ul").prepend('<li class="'+d+'"><a href="'+e+'">'+b+"</a></li>")}),a("nav#spine-sitenav a").filter(function(){return this.hostname&&this.hostname!==location.hostname}).addClass("external")},setup_printing:function(){function b(){window.print()}function c(){a("html").toggleClass("print"),a(".print-controls").remove()}function d(d){void 0!==d&&d.preventDefault(),$wsu_actions.find(".opened").toggleClass("opened closed"),a("html").toggleClass("print"),$spine.find("header").prepend(e),$spine.find(".unshelved").removeClass("unshelved").addClass("shelved"),a("#print-invoke").on("click",function(){window.print()}),a("#print-cancel").on("click",c),setTimeout(function(){b()},400)}var e='<span class="print-controls"><button id="print-invoke">Print</button><button id="print-cancel">Cancel</button></span>';a("#wsu-print-tab button").click(d),a("button.shut").on("click",function(a){a.preventDefault(),$wsu_actions.find(".opened").toggleClass("opened closed")})}})}(jQuery),function(a){a.extend(a.ui.spine.prototype,{foo:function(a){return a},_init:function(){{var b=(window.location.href,a("#wsu-actions")),c=a("#spine"),d=a("#wsu-search");a("#wsu-contact"),a("#wsu-share")}if(a("#glue > header").append('<button id="shelve"></button>'),a("#shelve").click(function(){c.toggleClass("unshelved shelved")}),!d.length){var e='<section id="wsu-search" class="spine-search tools closed" data-default="site-search">';e+='		<form id="default-search">',e+='			<input name="term" type="text" value="" placeholder="search">',e+="			<button>Submit</button>",e+="		</form>",e+='		<div id="spine-shortcuts"></div>',e+="</section>",b.append(e),a("#wsu-search form").submit(function(){var b=a("#wsu-search").attr("data-default"),c="";"site-search"==b&&(c=" site:"+location.hostname);var d="cx=004677039204386950923:xvo7gapmrrg",e="cof=FORID%3A11",f=a("#wsu-search input").val(),g="http://search.wsu.edu/default.aspx?"+d+"&"+e+"&q="+f+c;return window.location.href=g,!1})}},start_tab:function(){},setup_search:function(){var b="";a("#wsu-search input[type=text]").autosearch({source:function(c,d){b=c.term,a.ajax({url:"http://search.wsu.edu/2013service/searchservice/search.asmx/AZSearch",dataType:"jsonp",data:{featureClass:"P",style:"full",maxRows:12,name_startsWith:c.term},success:function(b){var e=new RegExp(a.ui.autocomplete.escapeRegex(c.term),"i");d(a.map(b,function(a){var b=a.label;return a.value&&(!c.term||e.test(b))||"true"==a.related?{label:a.label,value:a.value,searchKeywords:a.searchKeywords,related:a.related}:void 0}))}})},search:function(){},appendTo:"#spine-shortcuts",showRelated:!0,relatedHeader:"<hr/>",minLength:2,select:function(b,c){c.item.searchKeywords,c.item.label;a("#indices").empty(),a("#wsu-search input#searchterm[type=text]").autocomplete("close")},focus:function(){},open:function(){}}).data("autocomplete")}})}(jQuery),function(a){"use strict";a(document).ready(function(){var b={},c=a.extend({search:{providers:{local:{url:"http://search.wsu.edu/2013service/searchservice/search.asmx/AZSearch",dataType:"jsonp",featureClass:"P",style:"full",maxRows:12}},result:{appendTo:"#spine-shortcuts",showRelated:!0,relatedHeader:"<hr/>",minLength:2}},framework:{},social:{},analytics:{}},b);a.spine(c)})}(jQuery);