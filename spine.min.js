/*! wsu-spine 0.1.0 2014-02-06 */
/*  See https://github.com/washingtonstateuniversity/WSU-spine/ for full source.*/
function dump(a,b){var c,d,e,f,g="";for(b||(b=0),c="",d=0;b+1>d;d++)c+=" ";if("object"==typeof a)for(e in a)f=a[e],"object"==typeof f?(g+=c+"'"+e+"' ...\n",g+=dump(f,b+1)):g+=c+"'"+e+"' => \""+f+'"\n';else g="===>"+a+"<===("+typeof a+")";return g}!function(a){"use strict";function b(){a.widget("ui.autosearch",a.ui.autocomplete,{_renderMenu:function(b,c){var d=this,e=c.filter(function(a,b){return"false"==a.related?b:void 0}),f=c.filter(function(a,b){return"false"!=a.related?b:void 0});a.each(e,function(a,c){d._renderItemData(b,c)}),this.options.showRelated&&f.length&&(this.options.relatedHeader&&d._renderHeader(b,this.options.relatedHeader),a.each(f,function(a,c){d._renderItemData(b,c)}))},_renderItemData:function(a,b){return this._renderItem(a,b).data("ui-autocomplete-item",b)},_renderItem:function(b,c){var d=c.label,e=c.value,f="(?![^&;]+;)(?!<[^<>]*)("+a.ui.autocomplete.escapeRegex(this.term)+")(?![^<>]*>)(?![^&;]+;)";return d="<a href='"+e+"'>"+d.replace(new RegExp(f,"gi"),"<strong>$1</strong>")+"</a>",a("<li></li>").data("item.autocomplete",c).append(d).appendTo(b)},_renderHeader:function(b,c){return a("<li></li>").append("<a href=''>"+c+"</a>").appendTo(b)}});var b="";a("#wsu-search input#searchterm[type=text]").autosearch({source:function(c,d){b=c.term,a.ajax({url:"http://search.wsu.edu/2013service/searchservice/search.asmx/AZSearch",dataType:"jsonp",data:{featureClass:"P",style:"full",maxRows:12,name_startsWith:c.term},success:function(b){var e=new RegExp(a.ui.autocomplete.escapeRegex(c.term),"i");d(a.map(b,function(a){var b=a.label;return a.value&&(!c.term||e.test(b))||"true"==a.related?{label:a.label,value:a.value,searchKeywords:a.searchKeywords,related:a.related}:void 0}))}})},search:function(){},appendTo:"#index-search-results",showRelated:!0,relatedHeader:"<hr/>",minLength:2,select:function(b,c){c.item.searchKeywords,c.item.label;a("#indices").empty(),a("#wsu-search input#searchterm[type=text]").autocomplete("close")},focus:function(){},open:function(){}}).data("autocomplete")}a(document).ready(function(){function c(){window.print()}function d(){a("html").toggleClass("print"),a(".print-controls").remove()}function e(b){b.preventDefault(),a("#wsu-actions *.opened").toggleClass("opened closed"),a("html").toggleClass("print"),a("#spine header").prepend(s),a("#print-invoke").on("click",function(){window.print()}),a("#print-cancel").on("click",d),setTimeout(function(){c()},400)}function f(){var b=a(window).width();b>=1188?a("#jacket").removeClass().removeClass("size-small size-medium size-large size-xlarge size-lt-xlarge size-lt-large size-lt-medium size-lt-smallish size-gt-large size-gt-medium size-gt-smallish size-gt-small").addClass("size-xlarge size-gt-small size-gt-smallish size-gt-medium size-gt-large"):b>=990?a("#jacket").removeClass("size-small size-medium size-large size-xlarge size-lt-xlarge size-lt-large size-lt-medium size-lt-smallish size-gt-large size-gt-medium size-gt-smallish size-gt-small").addClass("size-large size-lt-xlarge size-gt-small size-gt-smallish size-gt-medium"):990>b&&b>=792?a("#jacket").removeClass("size-small size-medium size-large size-xlarge size-lt-xlarge size-lt-large size-lt-medium size-lt-smallish size-gt-large size-gt-medium size-gt-smallish size-gt-small").addClass("size-medium size-lt-xlarge size-lt-large size-gt-smallish size-gt-small"):b>=694&&792>b&&a("#binder").hasClass("fixed")?a("#jacket").removeClass("size-small size-medium size-large size-xlarge size-lt-xlarge size-lt-large size-lt-medium size-lt-smallish size-gt-large size-gt-medium size-gt-smallish size-gt-small").addClass("size-smallish size-lt-medium size-lt-large size-lt-xlarge size-gt-small"):792>b?a("#jacket").removeClass("size-small size-medium size-large size-xlarge size-lt-xlarge size-lt-large size-lt-medium size-lt-smallish size-gt-large size-gt-medium size-gt-smallish size-gt-small").addClass("size-small size-lt-smallish size-lt-medium size-lt-large size-lt-xlarge"):396>b&&a("#jacket").removeClass("size-small size-medium size-large size-xlarge size-lt-xlarge size-lt-large size-lt-medium size-lt-smallish size-gt-large size-gt-medium size-gt-smallish size-gt-small").addClass("size-small size-lt-small size-lt-smallish size-lt-medium size-lt-large size-lt-xlarge")}function g(){a(".size-large .row.equalize:not(.unequaled)").each(function(){var b=0;a(".column",this).each(function(){a(this).height()>b&&(b=a(this).height())}),a(".column",this).not(".unequaled").css("min-height",b),a(".size-smallish .column, size-small .column",this).css("min-height","auto")})}a("#spine #glue > header").append('<button id="shelve"></button>'),a("#shelve").click(function(){a("#spine").toggleClass("unshelved shelved")});var h='<section id="wsu-share" class="tools closed">';if(h+="	<ul>",h+='		<li class="by-facebook"><a href="#" class="addthis_button_facebook"><i class="wsu-icon"></i>Facebook</a></li>',h+='		<li class="by-twitter"><a href="#" class="addthis_button_twitter"><i class="wsu-icon"></i>Twitter</a></li>',h+='		<li class="by-email"><a href="#" class="addthis_button_email"><i class="wsu-icon"></i>Email</a></li>',h+='		<!--<li class="by-gmail"><a href="#" class="addthis_button_gplus"><i class="wsu-icon"></i>Google Plus</a></li>-->',h+='		<!--<li class="by-gmail"><a href="#" class="addthis_button_linkedin"><i class="wsu-icon"></i>LinkedIn</a></li>-->',h+='		<!--<li class="by-other"><a href="#" class="addthis_button_compact"><i class="wsu-icon"></i>More Options ...</a></li>-->',h+="	</ul>",h+="</section>",a("#wsu-share").length||a("#wsu-actions").append(h),!a("#wsu-contact").length){var i=a('meta[itemprop="name"]').attr("content"),j=a('meta[itemprop="department"]').attr("content"),k=a('meta[itemprop="url"]').attr("content"),l=a('meta[itemprop="streetAddress"]').attr("content"),m=a('meta[itemprop="addressLocality"]').attr("content"),n=(a('meta[itemprop="postalCode"]').attr("content"),a('meta[itemprop="telephone"]').attr("content")),o=a('meta[itemprop="email"]').attr("content"),p=a('meta[itemprop="ContactPoint"]').attr("title"),q=a('meta[itemprop="ContactPoint"]').attr("content"),r='<section id="wsu-contact" class="tools closed">';r+='<address class="hcard">',r+='	<div class="organization-unit fn org"><a href="'+k+'" class="url">'+j+"</a></div>",r+='	<div class="organization-name">'+i+"</div>",r+='	<div class="address">',r+='		<div class="street-address">'+l+"</div>",r+='		<div class="locality">'+m+"</div>",r+="	</div>",r+='	<div class="tel"><i class="wsu-icon"></i>'+n+"</div>",r+='	<div class="email" rel="email"><a href="mailto:'+o+'"><i class="wsu-icon"></i>Email us</a></div>',"undefined"!=typeof q&&(r+='	<div class="more"><a href="'+q+'"><i class="wsu-icon"></i>'+p+"</a></div>"),r+="</address>",r+="</section>",a("#wsu-actions").append(r)}a("#wsu-share-tab button").on("click",function(b){b.preventDefault(),a("#wsu-actions *.opened,#wsu-share,#wsu-share-tab").toggleClass("opened closed")}),a("#wsu-search-tab button").on("click",function(b){b.preventDefault(),a("#wsu-actions *.opened,#wsu-search,#wsu-search-tab").toggleClass("opened closed"),a("#spine section#wsu-search input").focus()}),a("#wsu-contact-tab button").on("click",function(b){b.preventDefault(),a("#wsu-actions *.opened,#wsu-contact,#wsu-contact-tab").toggleClass("opened closed")});var s='<span class="print-controls"><button id="print-invoke">Print</button><button id="print-cancel">Cancel</button></span>';a("#wsu-print-tab button").click(e),a("button.shut").on("click",function(b){b.preventDefault(),a("#wsu-actions").find(".opened").toggleClass("opened closed")}),a("#wsu-search form").submit(function(){var b=a("#wsu-search").attr("data-default");if("site-search"==b)var c=" site:"+location.hostname;else var c="";var d="cx=004677039204386950923:xvo7gapmrrg",e="cof=FORID%3A11",f=a("#wsu-search input").val(),g="http://search.wsu.edu/default.aspx?"+d+"&"+e+"&q="+f+c;return window.location.href=g,!1}),a(document).scroll(function(){var b=a(document).scrollTop();b>49?a("#spine").not(".unshelved").addClass("scanned"):a("#spine").removeClass("scanned")}),a("#spine nav ul,#spine ul").parents("li").addClass("parent"),a("#spine nav li[class*=current], nav li[class*=active]").addClass("active").parents("li").addClass("active"),a("#spine nav li a[class*=current], nav li a[class*=active]").parents("li").addClass("active"),a("#spine .active").not(":has(.active)").addClass("dogeared"),a("#spine li.parent > a").on("click",function(b){b.preventDefault(),a(this).parent("li").siblings().removeClass("opened"),a(this).parent("li").toggleClass("opened")}),a("#spine li.parent > a").each(function(){var b="Overview";if(a(this).attr("title")){var c=a(this).attr("title").length;c>0&&(b=a(this).attr("title"))}if(a(this).closest(".parent").hasClass("dogeared"))var d="overview dogeared";else var d="overview";var e=a(this).attr("href");"#"!=e&&a(this).parent("li").children("ul").prepend('<li class="'+d+'"><a href="'+e+'">'+b+"</a></li>")}),a("main").on("click swipeleft",function(){a("#spine").hasClass("unshelved")&&a("#spine").toggleClass("shelved unshelved")}),a(window).on("load resize scroll mouseup touchend",function(){var b=a("#spine footer").height(),c=window.innerHeight-b-50,d=a("#glue").height();d>c?a("#spine").removeClass("uncracked").addClass("cracked"):a("#spine").removeClass("cracked").addClass("uncracked")}),a(document).scroll(function(){var b=window.innerHeight,c=a(document).scrollTop(),d=a("#glue").height(),e=d-b;c>e?a("#spine.cracked").addClass("scrolled"):a("#spine.cracked").removeClass("scrolled")}),a(document).scroll(function(){var b=window.innerHeight,c=a(document).scrollTop(),d=a("#glue").height(),e=d-b;if(c>e){var f=-c;a("#spine.cracked").addClass("pinned"),a("#spine.cracked #glue").css("top",f)}else a("#spine.cracked").removeClass("pinned")}),a("nav#site a").filter(function(){return this.hostname&&this.hostname!==location.hostname}).addClass("external"),f(),a(window).resize(function(){f()}),g(),a(window).resize(function(){g()}),a(window).on("load resize",function(){if(a(".unbound").length){var b=a("main").offset().left,c=a("main").offset().right,d=a(window).width(),e=a("main").width(),c=d-a("main").offset().left;if(c>=e)var f=c-e;else f=0;var g=b+a("main").width();a(".unbound.recto").css("width",c).css("margin-right",-f),a(".unbound.verso").css("width",g).css("margin-left",-b),a(".unbound.verso.recto").css("width",d)}}),b()})}(jQuery);