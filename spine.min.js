/*! wsu-spine 0.1.0 2014-02-12 */
/*  See https://github.com/washingtonstateuniversity/WSU-spine/ for full source.*/
function dump(a,b){var c,d,e,f,g="";for(b||(b=0),c="",d=0;b+1>d;d++)c+=" ";if("object"==typeof a)for(e in a)f=a[e],"object"==typeof f?(g+=c+"'"+e+"' ...\n",g+=dump(f,b+1)):g+=c+"'"+e+"' => \""+f+'"\n';else g="===>"+a+"<===("+typeof a+")";return g}var addthis_config={data_track_addressbar:!1},addthis_conf={ver:300};if(!(window._atc||{}).ver)var _atd="www.addthis.com/",_atr=window.addthis_cdn||"//s7.addthis.com/",_euc=encodeURIComponent,_duc=decodeURIComponent,_atc={dbg:0,rrev:126504,dr:0,ver:250,loc:0,enote:"",cwait:500,bamp:.25,camp:1,csmp:1e-4,damp:1,famp:1,pamp:.1,sfmp:.1,tamp:1,plmp:1,vamp:1,cscs:1,ohmp:0,ltj:1,xamp:1,abf:!!window.addthis_do_ab,qs:0,cdn:0,rsrcs:{bookmark:_atr+"static/r07/bookmark041.html",atimg:_atr+"static/r07/atimg041.html",countercss:_atr+"static/r07/counter014.css",counterIE67css:_atr+"static/r07/counterIE67004.css",counter:_atr+"static/r07/counter017.js",core:_atr+"static/r07/core121.js",wombat:_atr+"static/r07/bar026.js",wombatcss:_atr+"static/r07/bar012.css",qbarcss:_atr+"bannerQuirks.css",fltcss:_atr+"static/r07/floating010.css",barcss:_atr+"static/r07/banner006.css",barjs:_atr+"static/r07/banner004.js",contentcss:_atr+"static/r07/content008.css",contentjs:_atr+"static/r07/content022.js",layersjs:_atr+"static/r07/layers036.js",layerscss:_atr+"static/r07/layers032.css",layersiecss:_atr+"static/r07/layersIE6007.css",layersdroidcss:_atr+"static/r07/layersdroid004.css",warning:_atr+"static/r07/warning000.html",ssojs:_atr+"static/r07/ssi005.js",ssocss:_atr+"static/r07/ssi004.css",authjs:_atr+"static/r07/auth016.js",peekaboocss:_atr+"static/r07/peekaboo002.css",overlayjs:_atr+"static/r07/overlay005.js",widget32css:_atr+"static/r07/widgetbig059.css",widget20css:_atr+"static/r07/widgetmed009.css",widgetcss:_atr+"static/r07/widget119.css",widgetIE67css:_atr+"static/r07/widgetIE67006.css",widgetpng:"//s7.addthis.com/static/r07/widget059.gif",embed:_atr+"static/r07/embed010.js",embedcss:_atr+"static/r07/embed004.css",lightbox:_atr+"static/r07/lightbox000.js",lightboxcss:_atr+"static/r07/lightbox000.css",link:_atr+"static/r07/link005.html",pinit:_atr+"static/r07/pinit017.html",linkedin:_atr+"static/r07/linkedin022.html",fbshare:_atr+"static/r07/fbshare004.html",tweet:_atr+"static/r07/tweet027.html",menujs:_atr+"static/r07/menu161.js",sh:_atr+"static/r07/sh148.html"}};!function(){function a(a,b,c,d){return function(){this.qs||(this.qs=0),_atc.qs++,this.qs++>0&&d||_atc.qs>1e3||!window.addthis||window.addthis.plo.push({call:a,args:arguments,ns:b,ctx:c})}}function b(a){var b=this,c=this.queue=[];this.name=a,this.call=function(){c.push(arguments)},this.call.queuer=this,this.flush=function(a,d){this.flushed=1;for(var e=0;e<c.length;e++)a.apply(d||b,c[e]);return a}}function c(a){a.style.width=a.style.height="1px",a.style.position="absolute",a.style.zIndex=1e5}function d(a){a&&!(a.data||{}).addthisxf&&window.addthis&&(addthis._pmh.flushed?_ate.pmh(a):addthis._pmh.call(a))}var e,f,g,h,i=window,j="https:"==window.location.protocol,k=(navigator.userAgent||"unk").toLowerCase(),l=/firefox/.test(k),m=/msie/.test(k)&&!/opera/.test(k),n={0:_atr,1:"//ct1.addthis.com/",6:"//ct6z.addthis.com/"},o={gb:"1",nl:"1",no:"1"},p={gr:"1",it:"1",cz:"1",ie:"1",es:"1",pt:"1",ro:"1",ca:"1",pl:"1",be:"1",fr:"1",dk:"1",hr:"1",de:"1",hu:"1",fi:"1",us:"1",ua:"1",mx:"1",se:"1",at:"1"},q={nz:"1"},r=(r=document.getElementsByTagName("script"))&&r[r.length-1].parentNode;if(_atc.cdn=0,!window.addthis||window.addthis.nodeType!==e){try{if(f=window.navigator?navigator.userLanguage||navigator.language:"",g=f.split("-").pop().toLowerCase(),h=f.substring(0,2),2!=g.length&&(g="unk"),_atr.indexOf("-")>-1||(window.addthis_cdn!==e?_atc.cdn=window.addthis_cdn:q[g]?_atc.cdn=6:o[g]?_atc.cdn=l||m?0:1:p[g]&&(_atc.cdn=m?0:1)),_atc.cdn){for(var s in _atc.rsrcs)_atc.rsrcs.hasOwnProperty(s)&&(_atc.rsrcs[s]=_atc.rsrcs[s].replace(_atr,"string"==typeof window.addthis_cdn?window.addthis_cdn:n[_atc.cdn]).replace(/live\/([a-z])07/,"live/$107"));_atr=n[_atc.cdn]}}catch(t){}if(window.addthis={ost:0,cache:{},plo:[],links:[],ems:[],timer:{load:(new Date).getTime()},_Queuer:b,_queueFor:a,data:{getShareCount:a("getShareCount","data")},bar:{show:a("show","bar"),initialize:a("initialize","bar")},layers:a("layers"),login:{initialize:a("initialize","login"),connect:a("connect","login")},configure:function(a){i.addthis_config||(i.addthis_config={}),i.addthis_share||(i.addthis_share={});for(var b in a)if("share"==b&&"object"==typeof a[b])for(var c in a[b])a[b].hasOwnProperty(c)&&(addthis.ost?addthis.update("share",c,a[b][c]):i.addthis_share[c]=a[b][c]);else a.hasOwnProperty(b)&&(addthis.ost?addthis.update("config",b,a[b]):i.addthis_config[b]=a[b])},box:a("box"),button:a("button"),counter:a("counter"),count:a("count"),lightbox:a("lightbox"),toolbox:a("toolbox"),update:a("update"),init:a("init"),ad:{menu:a("menu","ad","ad"),event:a("event","ad"),getPixels:a("getPixels","ad")},util:{getServiceName:a("getServiceName")},ready:a("ready"),addEventListener:a("addEventListener","ed","ed"),removeEventListener:a("removeEventListener","ed","ed"),user:{getID:a("getID","user"),getGeolocation:a("getGeolocation","user",null,!0),getPreferredServices:a("getPreferredServices","user",null,!0),getServiceShareHistory:a("getServiceShareHistory","user",null,!0),ready:a("ready","user"),isReturning:a("isReturning","user"),isOptedOut:a("isOptedOut","user"),isUserOf:a("isUserOf","user"),hasInterest:a("hasInterest","user"),isLocatedIn:a("isLocatedIn","user"),interests:a("getInterests","user"),services:a("getServices","user"),location:a("getLocation","user")},session:{source:a("getSource","session"),isSocial:a("isSocial","session"),isSearch:a("isSearch","session")},_pmh:new b("pmh"),_pml:[]},-1==document.location.href.indexOf(_atr)){var u=document.getElementById("_atssh");if(u||(u=document.createElement("div"),u.style.visibility="hidden",u.id="_atssh",c(u),r.appendChild(u)),window.postMessage&&(window.attachEvent?window.attachEvent("onmessage",d):window.addEventListener&&window.addEventListener("message",d,!1),addthis._pml.push(d)),!u.firstChild){var v,k=navigator.userAgent.toLowerCase(),w=Math.floor(1e3*Math.random());v=document.createElement("iframe"),v.id="_atssh"+w,v.title="AddThis utility frame",u.appendChild(v),c(v),v.frameborder=v.style.border=0,v.style.top=v.style.left=0,_atc._atf=v}}var x=document.createElement("script");x.type="text/javascript",x.src=(j?"https:":"http:")+_atc.rsrcs.core,r.appendChild(x);var y=1e4;setTimeout(function(){if(!window.addthis.timer.core&&(Math.random()<_atc.ohmp&&((new Image).src="//m.addthisedge.com/live/t00/oh.gif?"+Math.floor(4294967295*Math.random()).toString(36)+"&cdn="+_atc.cdn+"&sr="+_atc.ohmp+"&rev="+_atc.rrev+"&to="+y),0!==_atc.cdn)){var a=document.createElement("script");a.type="text/javascript",a.src=(j?"https:":"http:")+_atr+"static/r07/core121.js",r.appendChild(a)}},y)}}(),function(a){"use strict";function b(){a.widget("ui.autosearch",a.ui.autocomplete,{_renderMenu:function(b,c){var d=this,e=c.filter(function(a,b){return"false"==a.related?b:void 0}),f=c.filter(function(a,b){return"false"!=a.related?b:void 0});a.each(e,function(a,c){d._renderItemData(b,c)}),this.options.showRelated&&f.length&&(this.options.relatedHeader&&d._renderHeader(b,this.options.relatedHeader),a.each(f,function(a,c){d._renderItemData(b,c)}))},_renderItemData:function(a,b){return this._renderItem(a,b).data("ui-autocomplete-item",b)},_renderItem:function(b,c){var d=c.label,e=c.value,f="(?![^&;]+;)(?!<[^<>]*)("+a.ui.autocomplete.escapeRegex(this.term)+")(?![^<>]*>)(?![^&;]+;)";return d="<a href='"+e+"'>"+d.replace(new RegExp(f,"gi"),"<strong>$1</strong>")+"</a>",a("<li></li>").data("item.autocomplete",c).append(d).appendTo(b)},_renderHeader:function(b,c){return a("<li></li>").append("<a href=''>"+c+"</a>").appendTo(b)}});var b="";a("#wsu-search input#searchterm[type=text]").autosearch({source:function(c,d){b=c.term,a.ajax({url:"http://search.wsu.edu/2013service/searchservice/search.asmx/AZSearch",dataType:"jsonp",data:{featureClass:"P",style:"full",maxRows:12,name_startsWith:c.term},success:function(b){var e=new RegExp(a.ui.autocomplete.escapeRegex(c.term),"i");d(a.map(b,function(a){var b=a.label;return a.value&&(!c.term||e.test(b))||"true"==a.related?{label:a.label,value:a.value,searchKeywords:a.searchKeywords,related:a.related}:void 0}))}})},search:function(){},appendTo:"#index-search-results",showRelated:!0,relatedHeader:"<hr/>",minLength:2,select:function(b,c){c.item.searchKeywords,c.item.label;a("#indices").empty(),a("#wsu-search input#searchterm[type=text]").autocomplete("close")},focus:function(){},open:function(){}}).data("autocomplete")}a(document).ready(function(){function c(){window.print()}function d(){a("html").toggleClass("print"),a(".print-controls").remove()}function e(b){b.preventDefault(),a("#wsu-actions *.opened").toggleClass("opened closed"),a("html").toggleClass("print"),a("#spine header").prepend(v),a("#spine.unshelved").removeClass("unshelved").addClass("shelved"),a("#print-invoke").on("click",function(){window.print()}),a("#print-cancel").on("click",d),setTimeout(function(){c()},400)}function f(){var b=a(window).width();b>=1188?a("#jacket").removeClass().removeClass("size-small size-medium size-large size-xlarge size-lt-xlarge size-lt-large size-lt-medium size-lt-smallish size-gt-large size-gt-medium size-gt-smallish size-gt-small").addClass("size-xlarge size-gt-small size-gt-smallish size-gt-medium size-gt-large"):b>=990?a("#jacket").removeClass("size-small size-medium size-large size-xlarge size-lt-xlarge size-lt-large size-lt-medium size-lt-smallish size-gt-large size-gt-medium size-gt-smallish size-gt-small").addClass("size-large size-lt-xlarge size-gt-small size-gt-smallish size-gt-medium"):990>b&&b>=792?a("#jacket").removeClass("size-small size-medium size-large size-xlarge size-lt-xlarge size-lt-large size-lt-medium size-lt-smallish size-gt-large size-gt-medium size-gt-smallish size-gt-small").addClass("size-medium size-lt-xlarge size-lt-large size-gt-smallish size-gt-small"):b>=694&&792>b&&a("#binder").hasClass("fixed")?a("#jacket").removeClass("size-small size-medium size-large size-xlarge size-lt-xlarge size-lt-large size-lt-medium size-lt-smallish size-gt-large size-gt-medium size-gt-smallish size-gt-small").addClass("size-smallish size-lt-medium size-lt-large size-lt-xlarge size-gt-small"):792>b?a("#jacket").removeClass("size-small size-medium size-large size-xlarge size-lt-xlarge size-lt-large size-lt-medium size-lt-smallish size-gt-large size-gt-medium size-gt-smallish size-gt-small").addClass("size-small size-lt-smallish size-lt-medium size-lt-large size-lt-xlarge"):396>b&&a("#jacket").removeClass("size-small size-medium size-large size-xlarge size-lt-xlarge size-lt-large size-lt-medium size-lt-smallish size-gt-large size-gt-medium size-gt-smallish size-gt-small").addClass("size-small size-lt-small size-lt-smallish size-lt-medium size-lt-large size-lt-xlarge")}function g(){a(".equalize").length&&a(".row.equalize").each(function(){var b=0;a(".column",this).each(function(){a(this).height()>b&&(b=a(this).height())}),a(".column",this).not(".unequaled").css("min-height",b),a("section.equalize .column",this).css("min-height","auto")})}function h(){var b=(a("main").offset().top,a(window).height());if(a("#binder").hasClass("size-lt-large"))var c=b-50;else var c=b;a("main.fill-window-height").css("min-height",c)}if(a("#spine #glue > header").append('<button id="shelve"></button>'),a("#shelve").click(function(){a("#spine").toggleClass("unshelved shelved")}),!a("#wsu-search").length){var i='<section id="wsu-search" class="tools closed" data-default="site-search">';i+='		<form id="default-search">',i+='			<input name="term" type="text" value="" placeholder="search">',i+="			<button>Submit</button>",i+="		</form>",i+="</section>",a("#wsu-actions").append(i)}var j='<section id="wsu-share" class="tools closed">';if(j+="	<ul>",j+='		<li class="by-facebook"><a href="#" class="addthis_button_facebook">Facebook</a></li>',j+='		<li class="by-twitter"><a href="#" class="addthis_button_twitter">Twitter</a></li>',j+='		<li class="by-email"><a href="#" class="addthis_button_email">Email</a></li>',j+='		<!--<li class="by-gmail"><a href="#" class="addthis_button_gplus">Google Plus</a></li>-->',j+='		<li class="by-linkedin"><a href="#" class="addthis_button_linkedin">LinkedIn</a></li>',j+='		<!--<li class="by-other"><a href="#" class="addthis_button_compact">More Options ...</a></li>-->',j+="	</ul>",j+="</section>",a("#wsu-share").length||a("#wsu-actions").append(j),!a("#wsu-contact").length){var k=a('meta[itemprop="name"]').attr("content"),l=a('meta[itemprop="department"]').attr("content"),m=a('meta[itemprop="url"]').attr("content"),n=a('meta[itemprop="streetAddress"]').attr("content"),o=a('meta[itemprop="addressLocality"]').attr("content"),p=a('meta[itemprop="postalCode"]').attr("content"),q=a('meta[itemprop="telephone"]').attr("content"),r=a('meta[itemprop="email"]').attr("content"),s=a('meta[itemprop="ContactPoint"]').attr("title"),t=a('meta[itemprop="ContactPoint"]').attr("content"),u='<section id="wsu-contact" class="tools closed">';u+='<address itemscope itemtype="http://schema.org/Organization" class="hcard">',u+='	<div class="organization-unit fn org"><a href="'+m+'" class="url">'+l+"</a></div>",u+='	<div class="organization-name">'+k+"</div>",u+='	<div class="address">',u+='		<div class="street-address">'+n+"</div>",u+='		<div class="locality">'+o+' <span class="postalcode">'+p+"</span></div>",u+="	</div>",u+='	<div class="tel"><i class="wsu-icon"></i>'+q+"</div>",u+='	<div class="email" rel="email"><a href="mailto:'+r+'"><i class="wsu-icon"></i>Email us</a></div>',"undefined"!=typeof t&&(u+='	<div class="more"><a href="'+t+'"><i class="wsu-icon"></i>'+s+"</a></div>"),u+="</address>",u+="</section>",a("#wsu-actions").append(u)}a("#wsu-share-tab button").on("click",function(b){b.preventDefault(),a("#wsu-actions *.opened,#wsu-share,#wsu-share-tab").toggleClass("opened closed")}),a("#wsu-search-tab button").on("click",function(b){b.preventDefault(),a("#wsu-actions *.opened,#wsu-search,#wsu-search-tab").toggleClass("opened closed"),a("#spine section#wsu-search input").focus()}),a("#wsu-contact-tab button").on("click",function(b){b.preventDefault(),a("#wsu-actions *.opened,#wsu-contact,#wsu-contact-tab").toggleClass("opened closed")});var v='<span class="print-controls"><button id="print-invoke">Print</button><button id="print-cancel">Cancel</button></span>';a("#wsu-print-tab button").click(e),a("button.shut").on("click",function(b){b.preventDefault(),a("#wsu-actions").find(".opened").toggleClass("opened closed")}),a("#wsu-search form").submit(function(){var b=a("#wsu-search").attr("data-default");if("site-search"==b)var c=" site:"+location.hostname;else var c="";var d="cx=004677039204386950923:xvo7gapmrrg",e="cof=FORID%3A11",f=a("#wsu-search input").val(),g="http://search.wsu.edu/default.aspx?"+d+"&"+e+"&q="+f+c;return window.location.href=g,!1}),a(document).scroll(function(){var b=a(document).scrollTop();b>49?a("#spine").not(".unshelved").addClass("scanned"):a("#spine").removeClass("scanned")}),a("#spine nav ul,#spine ul").parents("li").addClass("parent"),a("#spine nav li[class*=current], nav li[class*=active]").addClass("active").parents("li").addClass("active"),a("#spine nav li a[class*=current], nav li a[class*=active]").parents("li").addClass("active"),a("#spine .active").not(":has(.active)").addClass("dogeared"),a("#spine nav li.parent > a").on("click",function(b){b.preventDefault(),a(this).parent("li").siblings().removeClass("opened"),a(this).parent("li").toggleClass("opened")}),a("#spine nav li.parent > a").each(function(){var b="Overview";if(a(this).attr("title")){var c=a(this).attr("title").length;c>0&&(b=a(this).attr("title"))}if(a(this).closest(".parent").hasClass("dogeared"))var d="overview dogeared";else var d="overview";var e=a(this).attr("href");"#"!=e&&a(this).parent("li").children("ul").prepend('<li class="'+d+'"><a href="'+e+'">'+b+"</a></li>")}),a("main").on("click swipeleft",function(){a("#spine").hasClass("unshelved")&&a("#spine").toggleClass("shelved unshelved")}),a(window).on("load resize scroll mouseup touchend",function(){var b=a("#spine footer").height(),c=window.innerHeight-b-50,d=a("#glue").height();d>c?a("#spine").removeClass("uncracked").addClass("cracked"):a("#spine").removeClass("cracked").addClass("uncracked")}),a(document).scroll(function(){var b=window.innerHeight,c=a(document).scrollTop(),d=a("#glue").height(),e=d-b;c>e?a("#spine.cracked").addClass("scrolled"):a("#spine.cracked").removeClass("scrolled")}),a("nav#spine-sitenav a").filter(function(){return this.hostname&&this.hostname!==location.hostname}).addClass("external"),f(),a(window).resize(function(){f()}),g(),a(window).resize(function(){g()}),h(),a(window).resize(function(){h()}),a(window).on("load resize",function(){if(a(".unbound").length){var b=a("main").offset().left,c=a("main").offset().right,d=a(window).width(),e=a("main").width(),c=d-a("main").offset().left;if(c>=e)var f=c-e;else f=0;var g=b+a("main").width();a(".unbound.recto").css("width",c).css("margin-right",-f),a(".unbound.verso").css("width",g).css("margin-left",-b),a(".unbound.verso.recto").css("width",d)}}),b()})}(jQuery);